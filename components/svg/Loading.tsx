import styled from "styled-components";
import gsap from "gsap";
import { useEffect, useRef } from "react";

export const Wrapper = styled.svg`
  aspect-ratio: 1/1;
  height: 40px;
  width: auto;
  display: block;
`;

export default () => {
  const ref = useRef<SVGSVGElement>(null);

  useEffect(() => {
    const tween = gsap.to(ref.current, {
      duration: 0.8,
      ease: "linear",
      rotate: 360,
      repeat: -1,
    });

    return () => {
      tween.kill();
    };
  }, []);

  return (
    <Wrapper
      ref={ref}
      width={50}
      height={50}
      viewBox="0 0 50 50"
      fill="none"
      xmlns="https://www.w3.org/TR/2018/CR-SVG2-20181004/"
      data-testid="loading-svg"
    >
      <path
        d="M7.67954 15C9.65735 11.5743 12.6066 8.81203 16.1543 7.0625C19.702 5.31297 23.6888 4.65475 27.6106 5.17106C31.5323 5.68737 35.213 7.35503 38.187 9.96316C41.161 12.5713 43.2948 16.0027 44.3186 19.8236C45.3423 23.6444 45.2101 27.683 43.9386 31.4287C42.6671 35.1744 40.3135 38.459 37.1753 40.867C34.0371 43.275 30.2553 44.6984 26.3081 44.9571C22.3609 45.2158 18.4257 44.2983 15 42.3205C10.411 39.664 7.06296 35.2957 5.69058 30.1739C4.31819 25.0521 5.03349 19.595 7.67954 15V15ZM39.4338 33.3333C41.082 30.4786 41.8466 27.1992 41.631 23.9099C41.4154 20.6206 40.2293 17.4691 38.2226 14.8539C36.2159 12.2388 33.4788 10.2774 30.3574 9.21779C27.2359 8.15821 23.8704 8.04803 20.6864 8.90119C17.5024 9.75435 14.6428 11.5325 12.4694 14.0109C10.2959 16.4892 8.90622 19.5564 8.47596 22.8245C8.0457 26.0927 8.59422 29.415 10.0522 32.3714C11.5101 35.3278 13.812 37.7855 16.6667 39.4337C20.4959 41.6388 25.0435 42.2349 29.3117 41.0913C33.5799 39.9476 37.2201 37.1576 39.4338 33.3333V33.3333Z"
        fill="#E3EEFF"
      />
      <path
        d="M15.0001 42.3205L16.6667 39.4338C20.4959 41.6389 25.0435 42.235 29.3117 41.0913C33.5799 39.9476 37.2201 37.1576 39.4338 33.3333L42.3206 35C39.6641 39.5891 35.2958 42.9371 30.174 44.3095C25.0522 45.6818 19.5951 44.9666 15.0001 42.3205Z"
        fill="#E14D2A"
      />
    </Wrapper>
  );
};
